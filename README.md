> 结合公司的游戏项目构思的游戏框架，支持SLG。

---

### 项目结构
```
hi-game
    hi-game-demo 演示项目
    hi-game-net 网络层
    hi-game-mongodb 持久层
    hi-game-lib
        hi-game-event 事件框架
    hi-game-lab 实验性内容
```

### 架构
方案一：小服设计，配置冗余
```
+-------------------------------------------+
| 客户端          LayaAir/U3d                |
+-------------------------------------------+
| 网络层          Netty                      |
+-------------------------------------------+
|                            |              |
| 业务层                     | 事件总线       |
|                            |              |
+-------------------------------------------+
| 持久层          MongoDB         缓存        |
+-------------------------------------------+
```

方案二：集群设计，通讯延迟（即便是同一台机器）
```
游戏服1 -> 配置服
游戏服2
```

方案三：单实例多服，单实例死循环，会导致其他服无法工作，无法开新服
```
+----------------------------------------------------+
|        |                            |              |
| 业务层  | server1,server2,server3    |  公共配置     |
|        |                            |              |
+----------------------------------------------------+
```

方案四：配置中间件Redis，解决不了getAll的问题，不支持复杂条件查询，而且需要大量的序列化/反序列化（配置数据很多，不推荐拷一份配置，倒是可以缓存热点数据）
```
游戏服1 -> Redis（配置）
游戏服2
```

方案五：配置中间件MongoDB，解决不了getAll的问题，需要大量的序列化/反序列化
```
游戏服1 -> MongoDB（配置）
游戏服2
```

方案对比：
* 性能：一 > 三 > 四 > 五 > 二
* 内存：一 > 五 > 四 > 三 > 二
* 复杂度：三 > 二 > 五 > 四 > 一

最后还是选择了方案三，虽然复杂度高，但是性能和内存都还不错。尤其是游戏项目中，经常会遍历所有资源、按条件查询资源  

### 日志目录结构
```
logs
    game.log
    error.log
module-logs
    2020-04-01
        test.log
    2020-04-02
        buff.log
        test.log
```

小服的话，这样比较方便查问题，只需要配置浏览器访问（我之前的项目有6w多个服）
```
http://log.lance.com/S564/logs/game.log
http://log.lance.com/S81313/module-logs/2020-04-05/item.log
```

大服，或者觉得这样运维比较麻烦的话，还可以试试搭ELK，然后把业务日志按日期输出

### 我的一些想法
* 2020年4月17日17:53:03 仔细想了一下，我到底是要做框架，还是游戏项目？结论是我没办法直接设计框架，框架是用来解决问题的，不是凭空造出来的。最原始的做法是先构思一个项目，完整跑起来之后，再抽离出游戏框架。所以接下来，我准备搞个简化版自走棋，然后再搞事情。
* 2020年5月15日16:34:52 我很惊讶，上个月还在迷茫怎么进入下一步，现在已经有一定的成果。空想框架是没任何意义的，构思项目也没有意义。框架的设计就是为了解决问题，需要结合项目经验、其他框架的设计。如果没办法直接设计出好的模型，不如从最简单的开始，分阶段设计，一步步完善。如果你有很好设计经验，也可以直接设计出相应的模型。
* 2020年12月2日16:41:42 现在我参与了新项目的开发，从零开始设计，有了新的想法，可以回过头来提出更好的设计方案。