> 结合公司的游戏项目构思的游戏框架，支持SLG。

---

### 项目结构
```
hi-game
    hi-game-demo 演示项目
    hi-game-net 网络层
    hi-game-mongodb 持久层
    hi-game-lib
        hi-game-event 事件框架
    hi-game-lab 实验性内容
```

### 架构
方案一：小服设计，配置冗余
```
+-------------------------------------------+
| 客户端          LayaAir/U3d                |
+-------------------------------------------+
| 网络层          Netty                      |
+-------------------------------------------+
|                            |              |
| 业务层                     | 事件总线       |
|                            |              |
+-------------------------------------------+
| 持久层          MongoDB         缓存        |
+-------------------------------------------+
```

方案二：集群设计，通讯延迟（即便是同一台机器）
```
游戏服1 -> 配置服
游戏服2
```

方案三：单实例多服，单实例死循环，会导致其他服无法工作，无法开新服
```
+----------------------------------------------------+
|        |                            |              |
| 业务层  | server1,server2,server3    |  公共配置     |
|        |                            |              |
+----------------------------------------------------+
```

方案四：配置中间件Redis，解决不了getAll的问题，不支持复杂条件查询，而且需要大量的序列化/反序列化（配置数据很多，不推荐拷一份配置，倒是可以缓存热点数据）
```
游戏服1 -> Redis（配置）
游戏服2
```

方案五：配置中间件MongoDB，解决不了getAll的问题，需要大量的序列化/反序列化
```
游戏服1 -> MongoDB（配置）
游戏服2
```

方案对比：
* 性能：一 > 三 > 四 > 五 > 二
* 内存：一 > 五 > 四 > 三 > 二
* 复杂度：三 > 二 > 五 > 四 > 一

最后还是选择了方案三，虽然复杂度高，但是性能和内存都还不错。尤其是游戏项目中，经常会遍历所有资源、按条件查询资源  

### 日志目录结构
```
logs
    game.log
    error.log
module-logs
    2020-04-01
        test.log
    2020-04-02
        buff.log
        test.log
```

小服的话，这样比较方便查问题，只需要配置浏览器访问（我之前的项目有6w多个服）
```
http://log.lance.com/S564/logs/game.log
http://log.lance.com/S81313/module-logs/2020-04-05/item.log
```

大服，或者觉得这样运维比较麻烦的话，还可以试试搭ELK，然后把业务日志按日期输出
