> 网络层：以前web是一次请求，一次返回，服务器不会主动向浏览器推送数据。游戏项目一般都是长连接，服务器可以随机向玩家推送消息，广播、交易申请什么的。

### 项目架构
```
ClientA -----------> +------------+         +------------+
                     |            | ------> |            | ----> XXController  
ClientB -----------> |   net      |         | dispatcher |
                     |            |         +------------+
ClientC -----------> +------------+ <--------------------------- AnyWhere
```
* net：只接收和响应协议，其中协议解析有专门的handler
* dispatcher：按玩家账号取模，可以保证玩家操作的并发安全；按地图块id取模，可以保证地图块内并发安全
* XXController：类似于SpringMVC的Controller
* AnyWhere：提供一个工具类，可以从任何地方回传协议（活动Handler、广播Service、业务Service）

### 设计思路
1. 用Session去绑定玩家，玩家的所有操作都以Session中的数据为准，响应协议时也从Session中读取相关信息，如：Channel
2. 客户端、服务器以“协议”为数据载体，有协议号、协议实体
3. 有协议，自然也就要有注册表，关联协议号和协议实体

### 需要解决的问题
1. 怎么保证玩家在同一条线程？上面dispatcher是解决协议后在同一线程，协议的请求和响应有可能不在同一线程


